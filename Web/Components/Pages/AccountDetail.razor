@page "/accounts/{Id:int}"
@using Domain.Entities
@using Application.Interfaces
@using MudBlazor

@inject IAccountService AccountService
@inject NavigationManager Navigation

<PageTitle>Account Details</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-8">
    <MudPaper Class="pa-6">
        <div class="d-flex align-center mb-4">
            <MudIconButton Icon="@Icons.Material.Filled.ArrowBack" OnClick="@(() => Navigation.NavigateTo("/accounts"))" Class="mr-2" />
            <MudText Typo="Typo.h5">Account Details</MudText>
        </div>

        @if (account == null)
        {
            <MudAlert Severity="Severity.Error">Account not found.</MudAlert>
        }
        else
        {
            <MudGrid>
                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle1"><b>Name:</b> @account.Name</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Type:</b> @account.Type</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Balance:</b> @account.balance?.ToString("N2") @account.Currency</MudText>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle1"><b>Currency:</b> @account.Currency</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Status:</b> 
                        <MudChip T="string" Size="Size.Small" Color="@(account.Status == "Active" ? Color.Success : Color.Default)">@account.Status</MudChip>
                    </MudText>
                    <MudText Typo="Typo.subtitle1"><b>Account ID:</b> @account.Id</MudText>
                </MudItem>
            </MudGrid>
            <div class="mt-6 d-flex justify-end">
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => Navigation.NavigateTo("/accounts"))">Back to List</MudButton>
            </div>
        }
    </MudPaper>
</MudContainer>

@code
{
    [Parameter] public int Id { get; set; }
    public Account? account;

    protected override void OnInitialized()
    {
        account = AccountService.GetAccountById(Id);
    }
}
