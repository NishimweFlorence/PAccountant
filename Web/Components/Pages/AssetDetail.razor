@page "/assets/{Id:int}"
@using Domain.Entities
@using Application.Interfaces
@using MudBlazor

@inject IAssetService AssetService
@inject NavigationManager Navigation

<PageTitle>Asset Details</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-8">
    <MudPaper Class="pa-6">
        <div class="d-flex align-center mb-4">
            <MudIconButton Icon="@Icons.Material.Filled.ArrowBack" OnClick="@(() => Navigation.NavigateTo("/assets"))" Class="mr-2" />
            <MudText Typo="Typo.h5">Asset Details</MudText>
        </div>

        @if (asset == null)
        {
            <MudAlert Severity="Severity.Error">Asset not found.</MudAlert>
        }
        else
        {
            <MudGrid>
                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle1"><b>Name:</b> @asset.Name</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Category:</b> @asset.Category</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Current Value:</b> @asset.CurrentValue.ToString("N2") @asset.Currency</MudText>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle1"><b>Purchase Value:</b> @asset.PurchaseValue.ToString("N2") @asset.Currency</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Purchase Date:</b> @asset.PurchaseDate.ToLongDateString()</MudText>
                    <MudText Typo="Typo.subtitle1"><b>Asset ID:</b> @asset.Id</MudText>
                </MudItem>
                <MudItem xs="12">
                     <MudText Typo="Typo.subtitle1"><b>Created At:</b> @asset.CreatedAt.ToString("dd MMM yyyy, HH:mm")</MudText>
                </MudItem>
            </MudGrid>
            <div class="mt-6 d-flex justify-end">
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => Navigation.NavigateTo("/assets"))">Back to List</MudButton>
            </div>
        }
    </MudPaper>
</MudContainer>

@code
{
    [Parameter] public int Id { get; set; }
    public Asset? asset;

    protected override void OnInitialized()
    {
        asset = AssetService.GetAssetById(Id);
    }
}
